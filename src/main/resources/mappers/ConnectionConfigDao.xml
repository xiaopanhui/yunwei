<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gzsf.operation.dao.ConnectionConfigDao">

    <resultMap type="com.gzsf.operation.model.ConnectionConfig" id="ConnectionConfigMap">
        <result property="connectionId" column="connection_id" jdbcType="INTEGER"/>
        <result property="configId" column="config_id" jdbcType="INTEGER"/>
        <result property="keyword" column="keyword" jdbcType="VARCHAR"/>
        <result property="description" column="description" jdbcType="VARCHAR"/>
        <result property="createdAt" column="created_at" jdbcType="TIMESTAMP"/>
    </resultMap>

    <!--查询单个-->
    <select id="getById" resultMap="ConnectionConfigMap">
        select
        connection.connection_id, connection.config_id, connection.keyword, connection.description,connection.created_at
        from operation.connection_config connection
        LEFT OUTER JOIN config_info  ON connection.config_id=config_info.config_id
        <where>
            <if test="connectionId != null">
                and connection_id = #{connectionId}
            </if>
        </where>
    </select>

    

    <!--通过主键修改数据-->
    <update id="update">
        update operation.connection_config
        <set>
            <if test="configId != null">
                and config_id = #{configId},
            </if>
            <if test="keyword != null and keyword != ''">
                and keyword = #{keyword},
            </if>
            <if test="description != null and description != ''">
                and description = #{description},
            </if>
            <if test="createdAt != null">
                and created_at = #{createdAt},
            </if>
        </set>
        where connection_id = #{connectionId}
    </update>

</mapper>